!function(e){var i={};function o(l){if(i[l])return i[l].exports;var a=i[l]={i:l,l:!1,exports:{}};return e[l].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,i,l){o.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:l})},o.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(i,"a",i),i},o.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},o.p="/",o(o.s=1)}({1:function(e,i,o){e.exports=o("lUbH")},lUbH:function(e,i){var o;o=jQuery,upload=function(e){var i=e.token,l=e.uid,a=e.tag,n=e.pictype,t=""==e.maxsize?1e4:e.maxsize,s=o("#"+e.uploadid);this.testFun=function(){alert(e.title+",你好")},this.initUpoad=function(d,p){console.log(d);var c=g(d,p);s.fileinput({language:"zh",allowedFileExtensions:["jpg","png","gif","jpeg"],uploadUrl:"/files/newupload",uploadExtraData:{uid:l,pictype:n,filename:e.uploadid,_token:i},initialPreview:c.preview,initialPreviewConfig:c.preconfig,maxFileSize:t,showRemove:!1,showUpload:!1,showCancel:!1,showClose:!1,overwriteInitial:!1,showCaption:!1}),s.on("fileuploaded",function(e,i,o,l){console.log("上传"),1==i.response.code&&r(a,i.response.data)}),s.on("filebatchselected",function(e,i){o(this).fileinput("upload")}),s.on("filedeleted",function(e,i,o,l){console.log("文件删除"),m(a,i)})};var r=function(e,i){var l;l=""!=o("#"+e).val()?JSON.parse(o("#"+e).val()):{},console.log(l),l[i.id]=i,o("#"+e).val(JSON.stringify(l))},m=function(e,i){console.log("删除文件 跟新数据 Key="+i),console.log("删除文件 跟新数据 Key="+o("#"+e).val()),obj=JSON.parse(o("#"+e).val()),console.log(obj),delete obj[i],o("#"+e).val(JSON.stringify(obj))},g=function(e,i){var l={},a=[],n=[];if(""!=e){var t=JSON.parse(e),s=["image/png","image/jpeg"];o.each(t,function(){if(""!=this){-1==o.inArray(this.m_format,s)?a.push("<div class='file-preview-text'><div class='file-preview-other'>"+this.m_name+"<span class='file-icon-4x'><i class='fa fa-file-text-o text-info'></i></span></div></div>"):a.push("<img src='"+i+this.m_url+"' class='file-preview-image' alt='"+this.m_name+"' title='"+this.m_name+"'>");var e={};e.caption=this.m_name,e.url="/files/del",e.key=this.id,n.push(e)}})}return l.preview=a,l.preconfig=n,console.log(l),l}},function(e){"use strict";e.fn.fileinputLocales.zh={fileSingle:"文件",filePlural:"个文件",browseLabel:"选择 &hellip;",removeLabel:"移除",removeTitle:"清除选中文件",cancelLabel:"取消",cancelTitle:"取消进行中的上传",uploadLabel:"上传",uploadTitle:"上传选中文件",msgNo:"没有",msgNoFilesSelected:"",msgCancelled:"取消",msgZoomModalHeading:"详细预览",msgFileRequired:"必须选择一个文件上传.",msgSizeTooSmall:'文件 "{name}" (<b>{size} KB</b>) 必须大于限定大小 <b>{minSize} KB</b>.',msgSizeTooLarge:'文件 "{name}" (<b>{size} KB</b>) 超过了允许大小 <b>{maxSize} KB</b>.',msgFilesTooLess:"你必须选择最少 <b>{n}</b> {files} 来上传. ",msgFilesTooMany:"选择的上传文件个数 <b>({n})</b> 超出最大文件的限制个数 <b>{m}</b>.",msgFileNotFound:'文件 "{name}" 未找到!',msgFileSecured:'安全限制，为了防止读取文件 "{name}".',msgFileNotReadable:'文件 "{name}" 不可读.',msgFilePreviewAborted:'取消 "{name}" 的预览.',msgFilePreviewError:'读取 "{name}" 时出现了一个错误.',msgInvalidFileName:'文件名 "{name}" 包含非法字符.',msgInvalidFileType:'不正确的类型 "{name}". 只支持 "{types}" 类型的文件.',msgInvalidFileExtension:'不正确的文件扩展名 "{name}". 只支持 "{extensions}" 的文件扩展名.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"该文件上传被中止",msgUploadThreshold:"处理中...",msgUploadBegin:"正在初始化...",msgUploadEnd:"完成",msgUploadEmpty:"无效的文件上传.",msgValidationError:"验证错误",msgLoading:"加载第 {index} 文件 共 {files} &hellip;",msgProgress:"加载第 {index} 文件 共 {files} - {name} - {percent}% 完成.",msgSelected:"{n} {files} 选中",msgFoldersNotAllowed:"只支持拖拽文件! 跳过 {n} 拖拽的文件夹.",msgImageWidthSmall:'宽度的图像文件的"{name}"的必须是至少{size}像素.',msgImageHeightSmall:'图像文件的"{name}"的高度必须至少为{size}像素.',msgImageWidthLarge:'宽度的图像文件"{name}"不能超过{size}像素.',msgImageHeightLarge:'图像文件"{name}"的高度不能超过{size}像素.',msgImageResizeError:"无法获取的图像尺寸调整。",msgImageResizeException:"错误而调整图像大小。<pre>{errors}</pre>",msgAjaxError:"{operation} 发生错误. 请重试!",msgAjaxProgressError:"{operation} 失败",ajaxOperations:{deleteThumb:"删除文件",uploadThumb:"上传文件",uploadBatch:"批量上传",uploadExtra:"表单数据上传"},dropZoneTitle:"拖拽文件到这里",dropZoneClickTitle:"<br>(或点击{files}按钮选择文件)",fileActionSettings:{removeTitle:"删除文件",uploadTitle:"上传文件",zoomTitle:"查看详情",dragTitle:"移动 / 重置",indicatorNewTitle:"没有上传",indicatorSuccessTitle:"上传",indicatorErrorTitle:"上传错误",indicatorLoadingTitle:"上传 ..."},previewZoomButtonTitles:{prev:"预览上一个文件",next:"预览下一个文件",toggleheader:"缩放",fullscreen:"全屏",borderless:"无边界模式",close:"关闭当前预览"}}}(window.jQuery)}});